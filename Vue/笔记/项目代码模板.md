<img class="lyb" src="http://lengyibai.gitee.io/img-bed/img/lyb.png" style="width:200px;margin:0 auto;border-radius:50%" />

<p style="font-size:50px;font-weight:bold;width:100%;text-align:center;color:#fff;text-shadow:0 0 15px">冷弋白</p>
<p style="text-align:center;color:#aaa;position: relative;top:-10px;text-shadow:0 0 10px"><a href='https://wpa.qq.com/msgrd?v=3&uin=1329670984&site=qq&menu=yes' style='text-decoration: none;
'>点击此处联系我</a></p>
# 代码封装

## 数据归类

<!--写在网络请求文件内-->

### 针对多/单tab栏多卡片

> 传入数组，数组内包含对象
>
> 返回数组，数组内包含对象
>
> PS：数据归类一般用于当前页面需要的数据分布在请求数据的各个对象里，如果是数据分布在请求数据的一级对象，则无需数据归类

```js
export class ServiceOrderList {
  constructor(data) {
    try {
      // 用于存储tab栏的数据
      this.data = [];
      class Data {
        constructor(data) {
          this.num = data.order_sn;
          this.name = data.order_serf.name;
          this.phone = data.user.phone;
          this.price = data.order_serf.price;
          this.time = data.pay_time;
        }
      }
      // 没有this的data是后端的数据
      this.data = data.map(item => {
        // 将数据里面的对象传入类中，并将类通过数组下标设置进存储tab栏的数据数组中
        return new Data(item);
      });
      //返回tab栏数组数据
      return this.data;
    } catch (error) {}
  }
}
```

### 针对多tab栏多卡片

> 前提是已经一次性获取了多个tab栏的数据

```js
export class GetGoodsList {
  /**
   * data:后端数据
   * index:tab栏标识符
   * tabsName:tab栏名称合集
   */
  constructor(data, index, tabsName) {
    try {
      //这里面存储构造函数
      let obj = {};
      obj[tabsName[index]] = function(data) {
        // 用于存储指定tab栏的数据
        this.data = [];
        class Data {
          constructor(data) {
            this.id = data.id;
            this.name = data.name;
          }
        }
        let that = this;
        // 没有this的data是后端的数据
       this.data = data.map((item, index) => {
          // 将数据里面的对象传入类中，并将类通过数组下标设置进存储指定tab栏的数据数组中
          return new Data(item);
        });
      };
      // 返回指定tab栏的数组数据
      return new obj[tabsName[index]](data).data;
    } catch (error) {}
  }
}
```

### 购物车数据归类

```js
export class CartList {
  constructor(data) {
    let goodList = [];
    class List {
      constructor(data) {
        class GoodList {
          constructor(data) {
            this.cover_img = data.image;
            this.name = data.text;
            this.info = data.info;
            this.max = data.max;
            this.num = data.num;
            this.price = data.price;
          }
        }
        this.type = data.categoryName;
        this.isSelect = false;
        this.goodList = data.goodList.map(item => {
          return new GoodList(item);
        });
      }
    }
    goodList = data.map(item => {
      return new List(item);
    });
    return goodList;
  }
}
```

## 页面数据删除更新

> 发送删除请求后，只能依靠发送的`id`，对本地数据进行匹配删除

```js
collectionGood(id).then(() => {
  Toast.clear();
  Toast.success('取消收藏成功');

  this.data.list.forEach((item, index) => {
    if (item.id == id) {
      this.data.list.splice(index, 1);
    }
  });
});
```

## 请求封装

> 针对多tab栏

```js
serviceOrderList() {
  let _data = this.data[this.tabType[this.currentIndex]];
  let list = _data ? _data : [];
  if (list.length === 0) {
    serviceOrderList(this.currentIndex).then(res => {
      this.data[this.tabType[this.currentIndex]] = new ServiceOrderList(
        res.data.data.data
      );
    });
  }
  if (list.length == 0) {
    this.isEmpty = true;
  } else {
    this.isEmpty = false;
  }
},
```

## 跨端跳页面

> 如从管家端跳转到商城端商品详情

```js
//设置商城端的token
$lybPA1.set('sctoken', $lybPA1.get('gjtoken'));
//跳转到商城端
window.location.href = `http://h5v2.haolinmeng.com/mall/#/detail?id=${this.getData[0].id}&specialJump=yes`;
```

# 代码命名规范

```json
data(): {
	tabData: 'Tab栏数据',
  tabType: 'Tab栏对象属性名整合',
  : '',
},
computed: {
  getSelectData: '获取被选中的数据',
  getTabAllData: '获取所有tab栏数据',
  getTabData: '获取指定tab栏数据',
},
methods: {
  getTabDataReq: '请求封装'
}
```

# Element UI

| 描述                 | 代码                                                         |
| -------------------- | ------------------------------------------------------------ |
| 给表格顶部背景加颜色 | `:header-cell-style="{ background: '#f5f7fa', color: '#606266' }"` |
|                      |                                                              |
|                      |                                                              |

